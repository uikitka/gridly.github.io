<script>
  const params = new URLSearchParams(location.search);
  const code = params.get('code');
  const error = params.get('error');
  const errorDescription = params.get('error_description');

  const scheme = 'com.marchenko.gridly.meta://ig-auth';

  if (code) {
    location.href = `${scheme}?code=${encodeURIComponent(code)}`;
  } else if (error) {
    location.href =
      `${scheme}?error=${encodeURIComponent(error)}&error_description=${encodeURIComponent(errorDescription ?? '')}`;
  } else {
    document.body.innerHTML = '<p style="font-family:sans-serif;text-align:center;margin-top:2rem;">Authorization cancelled or unexpected redirect.</p>';
  }
</script>
